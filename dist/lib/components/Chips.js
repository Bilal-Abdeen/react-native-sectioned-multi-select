var _interopRequireWildcard=require("@babel/runtime/helpers/interopRequireWildcard");Object.defineProperty(exports,"__esModule",{value:true});exports.Chip=exports.Chips=exports.RemoveAllChip=void 0;var React=_interopRequireWildcard(require("react"));var _propTypes=require("prop-types");var _reactNative=require("react-native");var _lodash=require("lodash");var _helpers=require("../helpers");var _=require("../../");var _actionOrigins=require("../reducer/actionOrigins");var _this=this,_jsxFileName="/Users/renrizzolo/Documents/websites/react-native-sectioned-multi-select/lib/components/Chips.js";var RemoveAllChip=React.memo(function(_ref){var _ref$styles=_ref.styles,stylesFromProps=_ref$styles===void 0?{}:_ref$styles;var _useSMSContext=(0,_.useSMSContext)(),selectedItems=_useSMSContext.selectedItems,showRemoveAll=_useSMSContext.showRemoveAll,colors=_useSMSContext.colors,getStyles=_useSMSContext.getStyles,styles=_useSMSContext.styles,removeAllText=_useSMSContext.removeAllText,_removeAllItems=_useSMSContext._removeAllItems;var chipTextStyles=React.useMemo(function(){return getStyles('chipText',{},stylesFromProps);},[styles.chipText,stylesFromProps.chipText]);var removeAllChipTextStyles=React.useMemo(function(){return getStyles('removeAllChipText',{},stylesFromProps);},[styles.removeAllChipText,stylesFromProps.removeAllChipText]);var removeAllChipTouchableStyles=React.useMemo(function(){return getStyles('removeAllChipTouchable',{},stylesFromProps);},[styles.removeAllChipTouchable,stylesFromProps.removeAllChipTouchable]);var chipContainerStyles=React.useMemo(function(){return getStyles('chipContainer',{},stylesFromProps);},[styles.chipContainer,stylesFromProps.chipContainer]);return selectedItems&&selectedItems.length>1&&showRemoveAll?React.createElement(_reactNative.View,{style:chipContainerStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:41,columnNumber:5}},React.createElement(_reactNative.TouchableOpacity,{onPress:function onPress(){return _removeAllItems(_actionOrigins.CHIPS_REMOVE_ALL);},style:removeAllChipTouchableStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:42,columnNumber:7}},React.createElement(_reactNative.Text,{style:[chipTextStyles,removeAllChipTextStyles],__self:_this,__source:{fileName:_jsxFileName,lineNumber:46,columnNumber:9}},removeAllText))):null;});exports.RemoveAllChip=RemoveAllChip;var Chips=function Chips(_ref2){var _ref2$styles=_ref2.styles,stylesFromProps=_ref2$styles===void 0?{}:_ref2$styles,children=_ref2.children;var _useSMSContext2=(0,_.useSMSContext)(),components=_useSMSContext2.components,styles=_useSMSContext2.styles,colors=_useSMSContext2.colors,single=_useSMSContext2.single,singleShowsChip=_useSMSContext2.singleShowsChip,_removeAllItems=_useSMSContext2._removeAllItems,getStyles=_useSMSContext2.getStyles,selectedItems=_useSMSContext2.selectedItems,showRemoveAll=_useSMSContext2.showRemoveAll,removeAllText=_useSMSContext2.removeAllText,showChips=_useSMSContext2.showChips;var showIfSingle=single?singleShowsChip:true;var chipsWrapperStyles=React.useMemo(function(){return getStyles('chipsWrapper',{},stylesFromProps);},[styles.chipsWrapper,stylesFromProps.chipsWrapper]);return children||(selectedItems.length>0&&showIfSingle&&showChips?React.createElement(_reactNative.View,{style:chipsWrapperStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:79,columnNumber:7}},React.createElement(RemoveAllChip,{__self:_this,__source:{fileName:_jsxFileName,lineNumber:80,columnNumber:9}}),selectedItems&&selectedItems.length>0&&selectedItems.map(function(id){return React.createElement(components.Chip,{styles:stylesFromProps,key:id,id:id,selectedItems:selectedItems,__self:_this,__source:{fileName:_jsxFileName,lineNumber:84,columnNumber:13}});})):null);};exports.Chips=Chips;var ChipWrapper=function ChipWrapper(Comp){return function(props){var _useSMSContext3=(0,_.useSMSContext)(),components=_useSMSContext3.components,items=_useSMSContext3.items,styles=_useSMSContext3.styles,getStyles=_useSMSContext3.getStyles,colors=_useSMSContext3.colors,displayKey=_useSMSContext3.displayKey,Icon=_useSMSContext3.Icon,hideChipRemove=_useSMSContext3.hideChipRemove,hideParentChips=_useSMSContext3.hideParentChips,iconNames=_useSMSContext3.iconNames,selectedItems=_useSMSContext3.selectedItems,_toggleChildren=_useSMSContext3._toggleChildren,_toggleItem=_useSMSContext3._toggleItem,getChildren=_useSMSContext3.getChildren,itemId=_useSMSContext3.itemId,childItemId=_useSMSContext3.childItemId,_checkIsParent=_useSMSContext3._checkIsParent;var stylesFromProps=props.styles,id=props.id;var _findItem=function _findItem(id){return find(id,items);};var find=function find(id,items,isChild){if(!items){return{};}var getFn=isChild?childItemId:itemId;var i=0;var found;for(;i<items.length;i+=1){if(getFn(items[i])===id){return items[i];}else if(Array.isArray(getChildren(items[i]))){found=find(id,getChildren(items[i]),true);if(found){return found;}}}};var item=React.useMemo(function(){return _findItem(id);},[_findItem,id]);if(!item){return null;}var isParent=_checkIsParent(item);var onPress=function onPress(){return _toggleItem(item,'chip');};var hideChip=isParent&&hideParentChips;if(!item||!item[displayKey]||hideChip)return null;return React.createElement(Comp,{onPress:onPress,styles:styles,stylesFromProps:stylesFromProps,getStyles:getStyles,colors:colors,displayKey:displayKey,Icon:Icon,isParent:isParent,ChipRemoveIcon:components.ChipRemoveIcon,hideChipRemove:hideChipRemove,hideParentChips:hideParentChips,iconNames:iconNames,item:item,selectedItems:selectedItems,__self:_this,__source:{fileName:_jsxFileName,lineNumber:152,columnNumber:5}});};};var Chip=ChipWrapper(React.memo(function(props){var ChipRemoveIcon=props.ChipRemoveIcon,styles=props.styles,_props$stylesFromProp=props.stylesFromProps,stylesFromProps=_props$stylesFromProp===void 0?{}:_props$stylesFromProp,colors=props.colors,displayKey=props.displayKey,item=props.item,onPress=props.onPress,Icon=props.Icon,hideChipRemove=props.hideChipRemove,iconNames=props.iconNames,getStyles=props.getStyles,isParent=props.isParent;var chipContainerStyles=React.useMemo(function(){return getStyles('chipContainer',{isParent:isParent,hideChipRemove:hideChipRemove},stylesFromProps);},[styles.chipContainer,stylesFromProps.chipContainer]);var chipTextStyles=React.useMemo(function(){return getStyles('chipText',{isParent:isParent},stylesFromProps);},[styles.chipText,stylesFromProps.chipText]);var chipIconTouchableStyles=React.useMemo(function(){return getStyles('chipIconTouchable',{isParent:isParent},stylesFromProps);},[styles.chipIconTouchable,stylesFromProps.chipIconTouchable]);console.log('chip render',item);return React.createElement(_reactNative.View,{style:chipContainerStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:211,columnNumber:9}},React.createElement(_reactNative.Text,{numberOfLines:2,style:chipTextStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:212,columnNumber:11}},item[displayKey]),!hideChipRemove&&React.createElement(_reactNative.TouchableOpacity,{onPress:onPress,style:chipIconTouchableStyles,__self:_this,__source:{fileName:_jsxFileName,lineNumber:216,columnNumber:13}},React.createElement(ChipRemoveIcon,{styles:stylesFromProps,__self:_this,__source:{fileName:_jsxFileName,lineNumber:217,columnNumber:15}})));},function(prevProps,nextProps){if(!(0,_lodash.isEqual)(prevProps.styles,nextProps.styles)){return false;}if(prevProps.selectedItems.includes(prevProps.id)&&nextProps.selectedItems.includes(prevProps.id)){return true;}if(!prevProps.selectedItems.includes(prevProps.id)&&!nextProps.selectedItems.includes(prevProps.id)){return true;}return false;}));exports.Chip=Chip;Chip.propTypes={styles:_propTypes.PropTypes.object,id:_propTypes.PropTypes.oneOfType([_propTypes.PropTypes.string,_propTypes.PropTypes.number]).isRequired};